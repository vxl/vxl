#Travis CI configuration for VXL
# See http://travis-ci.org/vxl/vxl

#dist: trusty # This is the default as of August 2017
sudo: false

language: cpp
compiler:
  - gcc
  - clang

# https://docs.travis-ci.com/user/customizing-the-build/
git:
  depth: 3

script:
  - export HERE=$(pwd)
  - cmake --version
  - mkdir -p ${HERE}/build
  - mkdir -p ${HERE}/install
  - cd ${HERE}/build
  - cmake
          -DCMAKE_INSTALL_PREFIX:PATH=${HERE}/install
          -DCMAKE_CXX_STANDARD:STRING=98
          -DBUILD_BRL:BOOL=OFF
          ../
  - ctest -D ExperimentalStart
  - ctest -D ExperimentalConfigure
  - ctest -D ExperimentalBuild -j2
  - ctest -D ExperimentalTest --schedule-random -j2
  - ctest -D ExperimentalSubmit
  - make install
