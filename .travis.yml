#Travis CI configuration for VXL
# See http://travis-ci.org/vxl/vxl

# sudo is required for using docker containers
sudo: required
#sudo: false

services:
  - docker

language: cpp
compiler:
  - gcc
#  - clang

# https://docs.travis-ci.com/user/customizing-the-build/
git:
  depth: 3

#cache: false
#  directories:
#  - $HOME/deps

#before_script:
#  - bash .travis/install-deps.sh

#script:
#  - export PATH=$HOME/deps/bin:$PATH
before_install:
  - docker build -t myvxl:m7 .

script:
#  - pwd
#  - docker images
  - docker run -v /home/travis/build/vxl/vxl:/home/vxl/vxl myvxl:m7 /bin/bash -c "export C_COMPILER='gcc'; export CXX_COMPILER='g++'; bash dockerRunCommand.sh"
  - docker run -v /home/travis/build/vxl/vxl:/home/vxl/vxl myvxl:m7 /bin/bash -c "export C_COMPILER='clang'; export CXX_COMPILER='clang++'; bash dockerRunCommand.sh"
