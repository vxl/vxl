TEST += VCL_HAS_BOOL
TEST += VCL_HAS_TYPENAME
TEST += VCL_HAS_EXPORT
TEST += VCL_HAS_MUTABLE
TEST += VCL_HAS_EXPLICIT
TEST += VCL_HAS_DYNAMIC_CAST
TEST += VCL_HAS_RTTI
TEST += VCL_FOR_SCOPE_HACK
TEST += VCL_DEFAULT_VALUE
TEST += VCL_HAS_MEMBER_TEMPLATES
TEST += VCL_CAN_DO_PARTIAL_SPECIALIZATION
TEST += VCL_DEFINE_SPECIALIZATION
TEST += VCL_ALLOWS_INLINE_INSTANTIATION
TEST += VCL_NEEDS_INLINE_INSTANTIATION
TEST += VCL_STATIC_CONST_INIT_INT
TEST += VCL_STATIC_CONST_INIT_NO_DEFN
TEST += VCL_STATIC_CONST_INIT_FLOAT
TEST += VCL_CAN_DO_STATIC_TEMPLATE_MEMBER
TEST += VCL_CAN_DO_NON_TYPE_FUNCTION_TEMPLATE_PARAMETER
TEST += VCL_NEED_FRIEND_FOR_TEMPLATE_OVERLOAD
TEST += VCL_OVERLOAD_CAST
TEST += VCL_NULL_TMPL_ARGS
TEST += VCL_NO_STATIC_DATA_MEMBERS
TEST += VCL_HAS_TEMPLATE_SYMBOLS
TEST += VCL_CAN_DO_IMPLICIT_TEMPLATES
TEST += VCL_CAN_DO_COMPLETE_DEFAULT_TYPE_PARAMETER
TEST += VCL_CAN_DO_TEMPLATE_DEFAULT_TYPE_PARAMETER
TEST += VCL_SUNPRO_CLASS_SCOPE_HACK
TEST += VCL_HAS_EXCEPTIONS
TEST += VCL_HAS_NAMESPACES
TEST += VCL_ALLOWS_NAMESPACE_STD
TEST += VCL_NEEDS_NAMESPACE_STD
TEST += VXL_UNISTD_USLEEP_IS_VOID
TEST += VXL_STDLIB_HAS_QSORT
TEST += VCL_CANNOT_SPECIALIZE_CV
TEST += VCL_TEMPLATE_MATCHES_TOO_OFTEN
TEST += VCL_HAS_SLICED_DESTRUCTOR_BUG
TEST += VCL_HAS_WORKING_STRINGSTREAM
TEST += VXL_HAS_TYPE_OF_SIZE
#TEST += VXL_C_MATH_HAS_SQRTF
#TEST += VXL_C_MATH_HAS_FINITE
#TEST += VXL_IEEEFP_HAS_FINITE
#TEST += VXL_STDLIB_HAS_LRAND48
#TEST += VXL_STDLIB_HAS_DRAND48
#TEST += VXL_STDLIB_HAS_SRAND48

#######################################
include $(VXLROOT)/config/top-params.mk
#######################################

$(RELOBJDIR)$/%.exe : vxl_platform_tests.cxx $(RELOBJDIR)$/vcl_config_compiler.h
	@$(MKDIR_P) $(@D)
	-t=0; $(C++) $(force_c++) $(DOS_FULL_SRC_PATH)vxl_platform_tests.cxx \
	  $(no_implicit_templates) $(tj_CCFLAGS) $(extraflags_for_object) \
	  -D$(patsubst %.exe,%,$(@F)) -c -o $(patsubst %.exe,%.$(OBJ_EXT),$@) && \
	 $(MAKE_EXE) $(link_op) $(patsubst %.exe,%.$(OBJ_EXT),$@) $(tj_LDFLAGS) \
	  $(LDPATH) $(STDLIBS) $(LDOPTS) -o $@ && t=1; \
	 perl -pi -e 'm/^$(patsubst %.exe,%,$(@F))\=/ && s/\d*$$/'$$t/\; $(RELOBJDIR)$/vcl_config_compiler.h

xall:: $(patsubst %,$(RELOBJDIR)$/%.exe,$(TEST))

$(RELOBJDIR)$/vcl_config_compiler.h :
	echo "$(TEST) " | perl -p -e 's/\s+/=\n/g;' > $@

######################################
include $(VXLROOT)/config/top-rules.mk
######################################
