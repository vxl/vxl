USES += contrib/oxl core
include $(IUEROOT)/core/vil/config.mk
TRY_MPEG2 := 1

LIBRARY = oxp

IMMEDIATE_LIBS += -lvil -lvnl -lvbl -lvpl

#######################################
include $(IUEROOT)/config/top-params.mk
#######################################

SOURCES += oxp_parse_seqname.cxx
SOURCES += Mapping_2d_2d.cxx
SOURCES += RadialLensCorrection.cxx
SOURCES += MedianReduceImage.cxx
SOURCES += ByteConvertImage.cxx
ifeq ($(HAS_JPEG),1)
SOURCES += JPEG_Decompressor.cxx
endif
SOURCES += ImageSequenceName.cxx
SOURCES += SequenceFileName.cxx
MANPAGE_SOURCES += ImageWarp.txx

SOURCES += GXFileVisitor.cxx

SOURCES += MovieFile.cxx
SOURCES += MovieFileInterface.cxx
ifeq ("$(HAS_JPEG)-$(HAS_BROKEN_AS)","1-")
SOURCES += SGIMovieFile.cxx
MANPAGE_SOURCES += SGIMovieFilePrivates.h
SOURCES += SGIMovieFileWrite.cxx
ifeq "$(TJ_GCC30)" "1"# otherwise gcc 3.0 needs too much virtual memory
FLAGS_SGIMovieFile.cxx := -O1
endif
else
TEMPLATE_SOURCES := $(subst Templates/vcl_vector+SGIMV_FrameIndex-.cxx,,$(TEMPLATE_SOURCES))
TEMPLATE_SOURCES := $(subst Templates/vcl_vector+SGIMV_FrameIndexArray-.cxx,,$(TEMPLATE_SOURCES))
TEMPLATE_SOURCES := $(subst Templates/vcl_vector+SGIMV_Variables-.cxx,,$(TEMPLATE_SOURCES))
endif
SOURCES += ImageSequenceMovieFile.cxx

SOURCES += oxp_bunch_of_files.cxx
SOURCES += oxp_vidl_moviefile.cxx
SOURCES += oxp_vob_frame_index.cxx

ifeq ($(HAS_MPEG2),1)
SOURCES += oxp_mpeg_codec.cxx
SOURCES += oxp_vidl_mpeg_codec.cxx
endif

SOURCES += oxp_yuv_to_rgb.cxx
MANPAGE_SOURCES += MapInverter.h

######################################
include $(IUEROOT)/config/top-rules.mk
######################################
