# This rule will not actually get updated
# until after dependencies have been made
# but that will probably be OK as the .h
# files in ./generic are now under cvs.
# The || true is to make sure the build
# doesn't fail for systems where perl is
# not available.
xall::
	( cd ./generic && $(MAKE) ) || true

LIBRARY := vcl
VERSION := 1.0

MANPAGE_SOURCES += vcl_stlfwd.h
MANPAGE_SOURCES += vcl_iosfwd.h
MANPAGE_SOURCES += vcl_complex_fwd.h
MANPAGE_SOURCES += vcl_where_root_dir.h.in
MANPAGE_SOURCES += vcl_config_compiler.h.in
MANPAGE_SOURCES += vcl_config_headers.h.in
MANPAGE_SOURCES += vcl_config_manual.h.in

SOURCES += vcl_cmath.cxx
SOURCES += vcl_cstdlib.cxx
SOURCES += vcl_cassert.cxx
SOURCES += vcl_deprecated.cxx
MANPAGE_SOURCES += vcl_bitset.h
MANPAGE_SOURCES += vcl_cctype.h
MANPAGE_SOURCES += vcl_cerrno.h
MANPAGE_SOURCES += vcl_cfloat.h
MANPAGE_SOURCES += vcl_ciso646.h
MANPAGE_SOURCES += vcl_climits.h
MANPAGE_SOURCES += vcl_clocale.h
MANPAGE_SOURCES += vcl_compiler.h
MANPAGE_SOURCES += vcl_csetjmp.h
MANPAGE_SOURCES += vcl_csignal.h
MANPAGE_SOURCES += vcl_cstdarg.h
MANPAGE_SOURCES += vcl_cstddef.h
MANPAGE_SOURCES += vcl_cstdio.h
MANPAGE_SOURCES += vcl_cstring.h
MANPAGE_SOURCES += vcl_ctime.h
MANPAGE_SOURCES += vcl_cwchar.h
MANPAGE_SOURCES += vcl_cwctype.h
MANPAGE_SOURCES += vcl_deprecated_header.h
MANPAGE_SOURCES += vcl_exception.h
MANPAGE_SOURCES += vcl_fstream.h
MANPAGE_SOURCES += vcl_iomanip.h
MANPAGE_SOURCES += vcl_ios.h
MANPAGE_SOURCES += vcl_iostream.h
MANPAGE_SOURCES += vcl_istream.h
MANPAGE_SOURCES += vcl_limits.h
MANPAGE_SOURCES += vcl_locale.h
MANPAGE_SOURCES += vcl_memory.h
MANPAGE_SOURCES += vcl_new.h
MANPAGE_SOURCES += vcl_numeric.h
MANPAGE_SOURCES += vcl_ostream.h
MANPAGE_SOURCES += vcl_queue.txx
MANPAGE_SOURCES += vcl_sstream.h
MANPAGE_SOURCES += vcl_stdexcept.h
MANPAGE_SOURCES += vcl_streambuf.h
MANPAGE_SOURCES += vcl_sys/time.h
MANPAGE_SOURCES += vcl_sys/types.h
MANPAGE_SOURCES += vcl_typeinfo.h
MANPAGE_SOURCES += vcl_valarray.h
MANPAGE_SOURCES += vcl_algorithm.txx
MANPAGE_SOURCES += vcl_complex.txx
MANPAGE_SOURCES += vcl_deque.txx
MANPAGE_SOURCES += vcl_functional.txx
MANPAGE_SOURCES += vcl_iterator.txx
MANPAGE_SOURCES += vcl_list.txx
MANPAGE_SOURCES += vcl_map.txx
MANPAGE_SOURCES += vcl_set.txx
MANPAGE_SOURCES += vcl_stack.txx
MANPAGE_SOURCES += vcl_string.txx
MANPAGE_SOURCES += vcl_utility.txx
MANPAGE_SOURCES += vcl_vector.txx

MANPAGE_SOURCES += generic/vcl_algorithm.h
MANPAGE_SOURCES += generic/vcl_bitset.h
MANPAGE_SOURCES += generic/vcl_blah.h
MANPAGE_SOURCES += generic/vcl_cassert.h
MANPAGE_SOURCES += generic/vcl_cctype.h
MANPAGE_SOURCES += generic/vcl_cerrno.h
MANPAGE_SOURCES += generic/vcl_cfloat.h
MANPAGE_SOURCES += generic/vcl_ciso646.h
MANPAGE_SOURCES += generic/vcl_climits.h
MANPAGE_SOURCES += generic/vcl_clocale.h
MANPAGE_SOURCES += generic/vcl_cmath.h
MANPAGE_SOURCES += generic/vcl_complex.h
MANPAGE_SOURCES += generic/vcl_csetjmp.h
MANPAGE_SOURCES += generic/vcl_csignal.h
MANPAGE_SOURCES += generic/vcl_cstdarg.h
MANPAGE_SOURCES += generic/vcl_cstddef.h
MANPAGE_SOURCES += generic/vcl_cstdio.h
MANPAGE_SOURCES += generic/vcl_cstdlib.h
MANPAGE_SOURCES += generic/vcl_cstring.h
MANPAGE_SOURCES += generic/vcl_ctime.h
MANPAGE_SOURCES += generic/vcl_cwchar.h
MANPAGE_SOURCES += generic/vcl_cwctype.h
MANPAGE_SOURCES += generic/vcl_deque.h
MANPAGE_SOURCES += generic/vcl_exception.h
MANPAGE_SOURCES += generic/vcl_fstream.h
MANPAGE_SOURCES += generic/vcl_functional.h
MANPAGE_SOURCES += generic/vcl_iomanip.h
MANPAGE_SOURCES += generic/vcl_ios.h
MANPAGE_SOURCES += generic/vcl_iosfwd.h
MANPAGE_SOURCES += generic/vcl_iostream.h
MANPAGE_SOURCES += generic/vcl_istream.h
MANPAGE_SOURCES += generic/vcl_iterator.h
MANPAGE_SOURCES += generic/vcl_limits.h
MANPAGE_SOURCES += generic/vcl_list.h
MANPAGE_SOURCES += generic/vcl_locale.h
MANPAGE_SOURCES += generic/vcl_map.h
MANPAGE_SOURCES += generic/vcl_memory.h
MANPAGE_SOURCES += generic/vcl_numeric.h
MANPAGE_SOURCES += generic/vcl_ostream.h
MANPAGE_SOURCES += generic/vcl_queue.h
MANPAGE_SOURCES += generic/vcl_set.h
MANPAGE_SOURCES += generic/vcl_sstream.h
MANPAGE_SOURCES += generic/vcl_stack.h
MANPAGE_SOURCES += generic/vcl_stdexcept.h
MANPAGE_SOURCES += generic/vcl_streambuf.h
MANPAGE_SOURCES += generic/vcl_string.h
MANPAGE_SOURCES += generic/vcl_typeinfo.h
MANPAGE_SOURCES += generic/vcl_utility.h
MANPAGE_SOURCES += generic/vcl_valarray.h
MANPAGE_SOURCES += generic/vcl_vector.h
MANPAGE_SOURCES += iso/vcl_bitset.h
MANPAGE_SOURCES += iso/vcl_cassert.h
MANPAGE_SOURCES += iso/vcl_cctype.h
MANPAGE_SOURCES += iso/vcl_cerrno.h
MANPAGE_SOURCES += iso/vcl_cfloat.h
MANPAGE_SOURCES += iso/vcl_ciso646.h
MANPAGE_SOURCES += iso/vcl_climits.h
MANPAGE_SOURCES += iso/vcl_clocale.h
MANPAGE_SOURCES += iso/vcl_cmath.h
MANPAGE_SOURCES += iso/vcl_csetjmp.h
MANPAGE_SOURCES += iso/vcl_csignal.h
MANPAGE_SOURCES += iso/vcl_cstdarg.h
MANPAGE_SOURCES += iso/vcl_cstddef.h
MANPAGE_SOURCES += iso/vcl_cstdio.h
MANPAGE_SOURCES += iso/vcl_cstdlib.h
MANPAGE_SOURCES += iso/vcl_cstring.h
MANPAGE_SOURCES += iso/vcl_ctime.h
MANPAGE_SOURCES += iso/vcl_cwchar.h
MANPAGE_SOURCES += iso/vcl_cwctype.h
MANPAGE_SOURCES += iso/vcl_exception.h
MANPAGE_SOURCES += iso/vcl_fstream.h
MANPAGE_SOURCES += iso/vcl_iomanip.h
MANPAGE_SOURCES += iso/vcl_ios.h
MANPAGE_SOURCES += iso/vcl_iosfwd.h
MANPAGE_SOURCES += iso/vcl_iostream.h
MANPAGE_SOURCES += iso/vcl_istream.h
MANPAGE_SOURCES += iso/vcl_limits.h
MANPAGE_SOURCES += iso/vcl_locale.h
MANPAGE_SOURCES += iso/vcl_memory.h
MANPAGE_SOURCES += iso/vcl_new.h
MANPAGE_SOURCES += iso/vcl_numeric.h
MANPAGE_SOURCES += iso/vcl_ostream.h
MANPAGE_SOURCES += iso/vcl_queue.txx
MANPAGE_SOURCES += iso/vcl_sstream.h
MANPAGE_SOURCES += iso/vcl_stack.txx
MANPAGE_SOURCES += iso/vcl_stdexcept.h
MANPAGE_SOURCES += iso/vcl_streambuf.h
MANPAGE_SOURCES += iso/vcl_typeinfo.h
MANPAGE_SOURCES += iso/vcl_valarray.h
MANPAGE_SOURCES += iso/vcl_algorithm.txx
MANPAGE_SOURCES += iso/vcl_complex.txx
MANPAGE_SOURCES += iso/vcl_deque.txx
MANPAGE_SOURCES += iso/vcl_functional.txx
MANPAGE_SOURCES += iso/vcl_iterator.txx
MANPAGE_SOURCES += iso/vcl_list.txx
MANPAGE_SOURCES += iso/vcl_map.txx
MANPAGE_SOURCES += iso/vcl_set.txx
MANPAGE_SOURCES += iso/vcl_string.txx
MANPAGE_SOURCES += iso/vcl_utility.txx
MANPAGE_SOURCES += iso/vcl_vector.txx

MANPAGE_SOURCES += gcc/vcl_cmath.h
MANPAGE_SOURCES += gcc/vcl_cstdlib.h
MANPAGE_SOURCES += egcs/vcl_algorithm.txx
MANPAGE_SOURCES += egcs/vcl_complex.txx
MANPAGE_SOURCES += egcs/vcl_deque.txx
MANPAGE_SOURCES += egcs/vcl_functional.txx
MANPAGE_SOURCES += egcs/vcl_iterator.txx
MANPAGE_SOURCES += egcs/vcl_list.txx
MANPAGE_SOURCES += egcs/vcl_map.txx
MANPAGE_SOURCES += egcs/vcl_set.txx
MANPAGE_SOURCES += egcs/vcl_string.txx
MANPAGE_SOURCES += egcs/vcl_utility.txx
MANPAGE_SOURCES += egcs/vcl_vector.txx
MANPAGE_SOURCES += gcc-295/vcl_algorithm.txx
MANPAGE_SOURCES += gcc-295/vcl_complex.txx
MANPAGE_SOURCES += gcc-295/vcl_deque.txx
MANPAGE_SOURCES += gcc-295/vcl_functional.txx
MANPAGE_SOURCES += gcc-295/vcl_iterator.txx
MANPAGE_SOURCES += gcc-295/vcl_list.txx
MANPAGE_SOURCES += gcc-295/vcl_map.txx
MANPAGE_SOURCES += gcc-295/vcl_set.txx
MANPAGE_SOURCES += gcc-295/vcl_string.txx
MANPAGE_SOURCES += gcc-295/vcl_utility.txx
MANPAGE_SOURCES += gcc-295/vcl_vector.txx
MANPAGE_SOURCES += gcc-295/vcl_iomanip.h
MANPAGE_SOURCES += gcc-295/vcl_ios.h
MANPAGE_SOURCES += gcc-295/vcl_queue.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_algorithm.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_deque.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_functional.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_iterator.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_list.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_map.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_set.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_string.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_utility.txx
MANPAGE_SOURCES += gcc-libstdcxx-v3/vcl_vector.txx

MANPAGE_SOURCES += sgi/vcl_cmath.h
MANPAGE_SOURCES += sgi/vcl_cstdlib.h
MANPAGE_SOURCES += sgi/vcl_iomanip.h
MANPAGE_SOURCES += sgi/vcl_ios.h
MANPAGE_SOURCES += sgi/vcl_iostream.h
MANPAGE_SOURCES += sgi/vcl_algorithm.txx
MANPAGE_SOURCES += sgi/vcl_bitset.h
MANPAGE_SOURCES += sgi/vcl_complex.txx
MANPAGE_SOURCES += sgi/vcl_deque.txx
MANPAGE_SOURCES += sgi/vcl_functional.txx
MANPAGE_SOURCES += sgi/vcl_iterator.txx
MANPAGE_SOURCES += sgi/vcl_list.txx
MANPAGE_SOURCES += sgi/vcl_map.txx
MANPAGE_SOURCES += sgi/vcl_set.txx
MANPAGE_SOURCES += sgi/vcl_string.txx
MANPAGE_SOURCES += sgi/vcl_utility.txx
MANPAGE_SOURCES += sgi/vcl_vector.txx

MANPAGE_SOURCES += sunpro/vcl_cmath.h
MANPAGE_SOURCES += sunpro/vcl_complex_fwd.h
MANPAGE_SOURCES += sunpro/vcl_cstdlib.h
MANPAGE_SOURCES += sunpro/vcl_stack.txx
MANPAGE_SOURCES += sunpro/vcl_algorithm.txx
MANPAGE_SOURCES += sunpro/vcl_complex.txx
MANPAGE_SOURCES += sunpro/vcl_deque.txx
MANPAGE_SOURCES += sunpro/vcl_functional.txx
MANPAGE_SOURCES += sunpro/vcl_iterator.txx
MANPAGE_SOURCES += sunpro/vcl_list.txx
MANPAGE_SOURCES += sunpro/vcl_map.txx
MANPAGE_SOURCES += sunpro/vcl_set.txx
MANPAGE_SOURCES += sunpro/vcl_utility.txx
MANPAGE_SOURCES += sunpro/vcl_vector.txx

MANPAGE_SOURCES += win32-vc60/vcl_cmath.h
MANPAGE_SOURCES += win32-vc60/vcl_complex.h
MANPAGE_SOURCES += win32-vc60/vcl_complex_fwd.h
MANPAGE_SOURCES += win32-vc60/vcl_cstdlib.h
MANPAGE_SOURCES += win32-vc60/vcl_string.h
MANPAGE_SOURCES += win32-vc70/vcl_cmath.h
MANPAGE_SOURCES += win32-vc70/vcl_cstdlib.h

MANPAGE_SOURCES += mwerks/vcl_cmath.h
MANPAGE_SOURCES += mwerks/vcl_complex.h
MANPAGE_SOURCES += mwerks/vcl_cstdlib.h

#######################################
include ${IUEROOT}/config/top-params.mk
#######################################

# It is OK to compile these sources with native
# STLs because they won't generate any code.
ifndef USE_NATIVE_STL
SOURCES += emulation/vcl_straits.cxx
SOURCES += emulation/vcl_hashtable.cxx
SOURCES += emulation/vcl_alloc.cxx
SOURCES += emulation/vcl_string_instances.cxx
SOURCES += emulation/vcl_rbtree_instances.cxx
MANPAGE_SOURCES += emulation/vcl_algorithm.txx
MANPAGE_SOURCES += emulation/vcl_complex.txx
MANPAGE_SOURCES += emulation/vcl_deque.txx
MANPAGE_SOURCES += emulation/vcl_functional.txx
MANPAGE_SOURCES += emulation/vcl_hash_map.txx # uses emulation/vcl_hash.txx
MANPAGE_SOURCES += emulation/vcl_iterator.txx
MANPAGE_SOURCES += emulation/vcl_list.txx
MANPAGE_SOURCES += emulation/vcl_map.txx # uses emulation/vcl_rbtree.txx
MANPAGE_SOURCES += emulation/vcl_multimap.txx
MANPAGE_SOURCES += emulation/vcl_set.txx # uses emulation/vcl_rbtree.txx
MANPAGE_SOURCES += emulation/vcl_string.txx
MANPAGE_SOURCES += emulation/vcl_utility.txx
MANPAGE_SOURCES += emulation/vcl_vector.txx
MANPAGE_SOURCES += emulation/vcl_hash.txx
MANPAGE_SOURCES += emulation/vcl_rbtree.txx
MANPAGE_SOURCES += emulation/vcl_algobase.h
MANPAGE_SOURCES += emulation/vcl_bool.h
MANPAGE_SOURCES += emulation/vcl_bvector.h
MANPAGE_SOURCES += emulation/vcl_complex_fwd.h
MANPAGE_SOURCES += emulation/vcl_defalloc.h
MANPAGE_SOURCES += emulation/vcl_functionx.h
MANPAGE_SOURCES += emulation/vcl_hash_set.h
MANPAGE_SOURCES += emulation/vcl_heap.h
MANPAGE_SOURCES += emulation/vcl_multiset.h
MANPAGE_SOURCES += emulation/vcl_new.h
MANPAGE_SOURCES += emulation/vcl_pair.h
MANPAGE_SOURCES += emulation/vcl_rel_ops.h
MANPAGE_SOURCES += emulation/vcl_stack.h
MANPAGE_SOURCES += emulation/vcl_stlfwd.h
MANPAGE_SOURCES += emulation/vcl_tempbuf.h
MANPAGE_SOURCES += emulation/vcl_tree.h

MANPAGE_SOURCES += emulation/vcl_stlconf.h
MANPAGE_SOURCES += emulation/gcc-272-stlconf.h
MANPAGE_SOURCES += emulation/gcc-2800-stlconf.h
MANPAGE_SOURCES += emulation/gcc-281-stlconf.h
MANPAGE_SOURCES += emulation/gcc-295-stlconf.h
MANPAGE_SOURCES += emulation/sgi-CC-stlconf.h
MANPAGE_SOURCES += emulation/sun-CC4.1-stlconf.h
MANPAGE_SOURCES += emulation/sun-CC5.0-stlconf.h
MANPAGE_SOURCES += emulation/win32-vc50-stlconf.h
MANPAGE_SOURCES += emulation/stlcomp.h
endif

DEFINES += -DBUILDING_VCL_DLL

ifndef NOTEST
SUBDIRS = tests
endif

######################################
include ${IUEROOT}/config/top-rules.mk
######################################

# on HP unix, this library has become too big, so it needs -fPIC
ifeq "HP-UX" "$(findstring HP-UX,$(OS))"
pic = $(PIC)
endif
